### js 核心概念

##### 执行机制
&emsp;&emsp;在js中，执行上下文（Execution Context）是非常重要的一种对象，它保存着函数执行所需的重要信息，其中有三个属性：变量对象(variable object)，作用域链(scope chain)，this指针(this value)
ps: 活动对象其实和变量对象是同一个东西在不同时期的两种叫法。函数还未开始执行（创建上下文的期间）时叫变量对象，函数开始执行以后就叫活动对象。

执行环境及作用域--from 高程三  
&emsp;&emsp;执行环境（execution context）是 JavaScript 中最为重要的一个概 念。执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个 与之关联的变量对象（variable object），环境中定义的所有变量和函数都保存在这个对象中。虽然我们编写的代码无法访问这个对象，但解析器在处理数据时会在后台使用它。  
&emsp;&emsp;全局执行环境是最外围的一个执行环境。在 Web 浏览器中，全局执行环境被认为是 window 对象，因 此所有全局变量和函数都是作为 window 对象的属性和方法创建的。某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁（全局执行环境直到应用程序退出——例如关闭网页或浏览器——时才会被销毁）。  
&emsp;&emsp;每个函数都有自己的执行环境。当执行流进入一个函数时，函数的环境就会被推入一个环境栈中。 而在函数执行之后，栈将其环境弹出，把控制权返回给之前的执行环境。  
&emsp;&emsp;当代码在一个环境中执行时，会创建变量对象的一个作用域链（scope chain）。作用域链的用途，是 保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端，始终都是当前执行的代码所 在环境的变量对象。如果这个环境是函数，则将其活动对象（activation object）作为变量对象。活动对 象在最开始时只包含一个变量，即 arguments 对象（这个对象在全局环境中是不存在的）。作用域链中 的下一个变量对象来自包含（外部）环境，而再下一个变量对象则来自下一个包含环境。这样，一直延 续到全局执行环境；全局执行环境的变量对象始终都是作用域链中的最后一个对象。

##### scope
什么是作用域/词法环境/词法作用域  
作用域是访问变量(包括函数名)的一套规则:
作用域与变量声明和函数定义位置有关, 层层嵌套, 内部可以访问外部, 外部不可访问内部, 访问变量时一层层往上找, 找到就停下, 到底了也找不到就会报引用错误;  
变量赋值时也是一层层往上找, 找到就地赋值, 找不到报引用错误; (非严格模式下)找不到在全局声明一个变量, 并赋值, 这个变量会成为window的属性  
(非严格模式下) 在非全局作用域, 不声明变量直接赋值, 会成为window的属性  
无论是否严格模式 在全局声明的变量是window的属性; 在全局定义的函数, 是window的方法  

全局作用域
函数作用域
块级作用域: 块级作用域的子块级作用域可以访问父级的变量以及重新赋值, 但是如果子级声明同名变量, 其实是两个变量, 子级会使用自己的变量; 这和var是一样的

##### 数据类型

基本数据类型----->包装类对象(String, Number, Boolean)  
基本数据类型----->字符串----->正则、JSON
**基本字符串和字符串对象全等**

![](./img/core1.png)

引用/复杂数据类型(对象): 函数 数组 普通对象 dom对象  
引用类型----->数组----->Array原型链上的方法
引用类型----->对象----->各种构造对象的方式和它们的应用{
工厂模式
构造函数----->原型----->原型链
}
*数组和对象是数据结构, 用于存放、管理和操作数据，当需要操作和展示数据时，要想到它们; es6新增数据结构Set和Map  
*处理数据是 js 所做的事情之一（之二是处理事件）, 但是 js 处理数据的能力很有限, 后台语言更专业  

##### 逻辑/控制语句

分支(if-else, switch-case), 循环(for, for-in/of, while, do-while, (break, continue)), 短路语句(||, &&)
有多个条件层层判断时, 上一层条件排除, 取反与下一层条件取交集
第一层 n<=10 排除
第二层 n>10 && n <20
第三层 n>=20 可加入分支 && n % 10 === 0进行细分判断 
第四层 n>=20 && n % 10 !== 0

![](./img/core2.png)

##### js所做的事情之二：事件处理

用户的事件分为两种：改变数据、改变形象  
Dom展示的内容是基于数据的，样式和布局是展示的辅助器，就好像陈列架之于商品，可以移动陈列架，商品自然跟着动了；可以减少商品内容，如果是可以变形的陈列容器，那么容器也会随之变化。  
当需要改变呈现的效果时，需要弄清楚是那一种改变，是基于数据，还是浮于表面。